knitr::opts_chunk$set(echo = TRUE, warning = FALSE, results = FALSE, message = FALSE)
# set up
library(tidyverse)
library(sf)
library(lubridate)
library(tigris)
library(tidycensus)
library(gganimate)
library(viridis)
library(riem)
library(gridExtra)
library(knitr)
library(kableExtra)
library(RSocrata)
library(caret)
library(purrr)
library(FNN)
library(stargazer)
library(dplyr)
library(spatstat)
library(raster)
library(spdep)
library(grid)
library(mapview)
palette5 <- c("#eff3ff","#bdd7e7","#6baed6","#3182bd","#08519c")
palette4 <- c("#D2FBD4","#92BCAB","#527D82","#123F5A")
palette4_2 <- c("#83c8f9","#2984c3","#075d9a","#000066")
palette2 <- c("#6baed6","#08519c")
source("https://raw.githubusercontent.com/urbanSpatial/Public-Policy-Analytics-Landing/master/functions.r")
# import SF neighborhood boundaries
neighborhood_sf <-
st_read("local_data_source/Analysis Neighborhoods.geojson") %>%
st_as_sf(coords = the_geom.coordinates, crs = 4326, agr = "constant") %>%
st_transform('ESRI:102243')
# import meters data
meters <-
read.socrata("https://data.sfgov.org/resource/8vzz-qzz9.json") %>%
dplyr::select(post_id, street_id, longitude, latitude) %>%
na.omit()
meters_sf <-
meters %>%
st_as_sf(coords = c("longitude", "latitude"), crs = 4326, agr = "constant") %>%
st_transform('ESRI:102243')
# import street park records in a specific time span
street_parks <-
read.socrata("https://data.sfgov.org/resource/imvp-dq3v.json?$where=session_start_dt between '2021-07-16T00:00:00' and '2021-08-27T00:00:00'") %>%
na.omit() %>%
merge(meters, by="post_id")
